<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ --><title>Bootstrap 101 Template</title>
        <!-- Bootstrap -->
        <link href="bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --><!-- WARNING: Respond.js doesn't work if you view the page via file:// --><!--[if lt IE 9]>
        <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <script src="jquery-3.2.1/jquery-3.2.1.min.js">
        </script>
		<script src="bootstrap-3.3.7-dist/js/bootstrap.min.js">
        </script>
        <script type="text/javascript">
            $(document).ready(function(){
                var value = 0;
                var time = 50;
                //进度条复位函数
                function reset(){
                    value = 0
                    $("#prog").removeClass("progress-bar-success").css("width", "0%").text("等待启动");
                    //setTimeout(increment,5000);
                }
                //百分数增加，0-30时为红色，30-60为黄色，60-90为蓝色，>90为绿色
                function increment(){
                    value += 1;
                    $("#prog").css("width", value + "%").text(value + "%");
                    if (value >= 0 && value <= 30) {
                        $("#prog").addClass("progress-bar-danger");
                    }
                    else 
                        if (value >= 30 && value <= 60) {
                            $("#prog").removeClass("progress-bar-danger");
                            $("#prog").addClass("progress-bar-warning");
                        }
                        else 
                            if (value >= 60 && value <= 90) {
                                $("#prog").removeClass("progress-bar-warning");
                                $("#prog").addClass("progress-bar-info");
                            }
                            else 
                                if (value >= 90 && value < 100) {
                                    $("#prog").removeClass("progress-bar-info");
                                    $("#prog").addClass("progress-bar-success");
                                }
                                else {
                                    setTimeout(reset, 3000);
                                    return;
                                    
                                }
                    
                    st = setTimeout(increment, time);
                }
                
                increment();
                //进度条停止与重新开始
                $("#stop").click(function(){
                    if ("stop" == $("#stop").val()) {
                        //$("#prog").stop();
                        clearTimeout(st);
                        $("#prog").css("width", "0%").text("等待启动");
                        $("#stop").val("start").text("重新开始");
                    }
                    else 
                        if ("start" == $("#stop").val()) {
                            increment();
                            $("#stop").val("stop").text("停止");
                        }
                });
                //进度条暂停与继续
                $("#pause").click(function(){
                    if ("pause" == $("#pause").val()) {
                        //$("#prog").stop();
                        clearTimeout(st);
                        $("#pause").val("goon").text("继续");
                    }
                    else 
                        if ("goon" == $("#pause").val()) {
                            increment();
                            $("#pause").val("stop").text("暂停");
                        }
                });
            });
        </script>
    </head>
    <body>
        <div class="progress progress-striped active">
            <div id="prog" class="progress-bar" role="progressbar" aria-valuenow="" aria-valuemin="0" aria-valuemax="100" style="width:0%;">
                <span id="proglabel">正在启动，请稍后......</span>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-4 col-sm-6">
                <button id="pause" class="btn btn-primary" value="pause">
                    暂停
                </button>
                <button id="stop" class="btn btn-primary" value="stop">
                    停止
                </button>
                <!--<button id="goon" class="btn btn-primary">继续<button>-->
            </div>
        </div>
    </body>
</html>
